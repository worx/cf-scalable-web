; SPDX-License-Identifier: GPL-2.0-or-later
; Copyright (C) 2026 The Worx Company
; Author: Kurt Vanderwater <kurt@worxco.net>
;
; PHP 8.3 configuration
; Installed to /etc/php/8.3/fpm/php.ini during AMI build
;

[PHP]
; Resource limits
memory_limit = 256M
max_execution_time = 120
max_input_time = 60
max_input_vars = 5000

; Upload limits
upload_max_filesize = 64M
post_max_size = 64M

; Error handling (log only, no display in production)
display_errors = Off
display_startup_errors = Off
log_errors = On
error_log = /var/log/php8.3-fpm.log
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Timezone
date.timezone = America/New_York

; Session (Redis handler configured at runtime)
session.save_handler = files
session.save_path = /tmp

; Security
expose_php = Off
allow_url_fopen = On
allow_url_include = Off

[opcache]
opcache.enable = 1
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 16
opcache.max_accelerated_files = 20000
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
opcache.enable_cli = 0

; JIT (PHP 8.x feature)
opcache.jit = 1255
opcache.jit_buffer_size = 128M

[apcu]
apc.enabled = 1
apc.shm_size = 64M
apc.ttl = 7200
apc.enable_cli = 0
